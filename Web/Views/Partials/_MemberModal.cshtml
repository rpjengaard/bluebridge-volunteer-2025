@*
    Reusable Member Modal Partial

    Usage:
    1. Include this partial in your view: @await Html.PartialAsync("Partials/_MemberModal")
    2. Add a button/link with onclick="openMemberModal('member-guid-here')"

    Example:
    <button onclick="openMemberModal('@member.MemberKey')">Se profil</button>
*@

<!-- Member Modal -->
<div id="memberModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" onclick="closeMemberModal()"></div>

    <!-- Modal Panel -->
    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative transform overflow-hidden rounded-lg bg-white shadow-xl transition-all w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                <!-- Loading State -->
                <div id="modalLoading" class="p-12 text-center">
                    <svg class="animate-spin h-8 w-8 text-blue-bridge mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-600">Indlæser medlemsdata...</p>
                </div>

                <!-- Error State -->
                <div id="modalError" class="hidden p-12 text-center">
                    <svg class="mx-auto h-12 w-12 text-red-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                    </svg>
                    <h3 class="mt-4 text-lg font-semibold text-gray-900">Kunne ikke hente data</h3>
                    <p class="mt-2 text-gray-600">Der opstod en fejl. Prøv igen senere.</p>
                    <button onclick="closeMemberModal()" class="mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">Luk</button>
                </div>

                <!-- Content -->
                <div id="modalContent" class="hidden">
                    <!-- Header -->
                    <div class="bg-blue-bridge text-white px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 id="modalMemberName" class="text-xl font-bold">Medlemsnavn</h2>
                                <p class="text-white/70 text-sm">Medlemsprofil</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <div id="modalMemberGroups" class="flex items-center gap-2"></div>
                                <button onclick="closeMemberModal()" class="text-white/70 hover:text-white p-1">
                                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Body -->
                    <div class="p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Main Content -->
                            <div class="lg:col-span-2 space-y-6">
                                <!-- Personal Information -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Personlige oplysninger</h3>
                                    <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3">
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Fornavn</dt>
                                            <dd id="modalFirstName" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Efternavn</dt>
                                            <dd id="modalLastName" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Email</dt>
                                            <dd id="modalEmail" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Telefon</dt>
                                            <dd id="modalPhone" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Alder</dt>
                                            <dd id="modalAge" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                        <div>
                                            <dt class="text-sm font-medium text-gray-500">Fødselsdato</dt>
                                            <dd id="modalBirthdate" class="mt-1 text-sm text-gray-900">-</dd>
                                        </div>
                                    </dl>
                                </div>

                                <!-- Previous Workplaces -->
                                <div id="modalWorkplacesSection" class="bg-gray-50 rounded-lg p-4 hidden">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Tidligere arbejdssteder</h3>
                                    <p id="modalWorkplaces" class="text-sm text-gray-700 whitespace-pre-wrap"></p>
                                </div>

                                <!-- Crew Wishes -->
                                <div id="modalCrewWishesSection" class="bg-amber-50 rounded-lg p-4 hidden">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Crew ønsker</h3>
                                    <div id="modalCrewWishes" class="flex flex-wrap gap-2"></div>
                                </div>

                                <!-- Assigned Crews -->
                                <div id="modalAssignedCrewsSection" class="bg-green-50 rounded-lg p-4 hidden">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Tildelte crews</h3>
                                    <div id="modalAssignedCrews" class="space-y-2"></div>
                                </div>
                            </div>

                            <!-- Sidebar -->
                            <div class="space-y-6">
                                <!-- Status -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Status</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-500">2026 Status</span>
                                            <span id="modalAcceptStatus" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">-</span>
                                        </div>
                                        <div id="modalAcceptedDateRow" class="hidden flex items-center justify-between">
                                            <span class="text-sm text-gray-500">Accepteret</span>
                                            <span id="modalAcceptedDate" class="text-sm text-gray-900">-</span>
                                        </div>
                                        <div id="modalInvitationDateRow" class="hidden flex items-center justify-between">
                                            <span class="text-sm text-gray-500">Invitation sendt</span>
                                            <span id="modalInvitationDate" class="text-sm text-gray-900">-</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Quick Actions -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Handlinger</h3>
                                    <div class="space-y-2">
                                        <a id="modalEmailLink" href="#" class="w-full inline-flex items-center justify-center px-4 py-2 border border-blue-bridge text-blue-bridge rounded-md hover:bg-blue-bridge hover:text-white transition-colors text-sm">
                                            <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                                            </svg>
                                            Send email
                                        </a>
                                        <a id="modalPhoneLink" href="#" class="w-full inline-flex items-center justify-center px-4 py-2 border border-green-600 text-green-600 rounded-md hover:bg-green-600 hover:text-white transition-colors text-sm hidden">
                                            <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                                            </svg>
                                            Ring op
                                        </a>
                                        <a id="modalFullProfileLink" href="#" target="_blank" class="w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-sm">
                                            <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                                            </svg>
                                            Åbn fuld profil
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/member-modal.js"></script>
